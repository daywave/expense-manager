<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Formulario de Reporte</title>
</head>

<body>
    <h1>Reporte de Datos</h1>

    <form id="reportForm">
        <label for="startDate">Fecha de Inicio:</label>
        <input type="date" id="startDate" name="startDate" required>

        <label for="endDate">Fecha Final:</label>
        <input type="date" id="endDate" name="endDate" required>

        <button type="button" onclick="generarReporte()">Enviar</button>
    </form>

    <div id="resultados">
        <!-- Aquí se mostrarán los resultados -->
    </div>

    <script>
        function generarReporte() {
  console.log('Entro a generar reporte');

  // Obtener los valores ingresados por el usuario
  var startDate = new Date(document.getElementById('startDate').value);
  var endDate = new Date(document.getElementById('endDate').value);

  // Obtener los datos del localStorage
  let existingData = JSON.parse(localStorage.getItem('datos')) || [];

  // Filtrar los datos por fecha
  let filteredData = existingData.filter(dato => {
    let datoDate = new Date(dato.fecha);
    return datoDate >= startDate && datoDate <= endDate;
  });

  // Mostrar los valores ingresados por el usuario y los datos filtrados
  let resultadosHTML = `
    <h2>Resultados:</h2>
    <p>Fecha de Inicio: ${startDate.toDateString()}</p>
    <p>Fecha Final: ${endDate.toDateString()}</p>
    <h3>Datos filtrados:</h3>
  `;

  // Recorrer los datos filtrados y agregarlos al HTML
  filteredData.forEach(dato => {
    resultadosHTML += `
      <p>Categoría: ${dato.categoria ? dato.categoria : ''}</p>
      <p>Fecha: ${dato.fecha}</p>
      <p>Cantidad: ${dato.cantidad}</p>
    `;

    // Si la propiedad "categoria" tiene un valor, agregar una línea horizontal
    if (dato.categoria) {
      resultadosHTML += `<hr>`;
    }
  });

  // Mostrar el HTML en el elemento "resultados"
  document.getElementById('resultados').innerHTML = resultadosHTML;
}
    </script>
</body>

</html>